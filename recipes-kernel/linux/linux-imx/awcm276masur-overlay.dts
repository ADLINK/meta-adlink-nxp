// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Copyright 2023 ADLINK Technology Corp.
 *
 * Author: Po Cheng <po.cheng@adlinktech.com>
 */

/dts-v1/;
/plugin/;

/ {
	fragment@0 {
		target-path = "/uart1";
		__overlay__ {
			bluetooth {
				compatible = "mrvl,88w8897";
			};
		};
	};

	fragment@1 {
		target-path = "/usdhc1";
		__overlay__ {
			pinctrl-names = "default", "state_100mhz", "state_200mhz";
			pinctrl-0 = <&pinctrl_usdhc1>;
			pinctrl-1 = <&pinctrl_usdhc1_100mhz>;
			pinctrl-2 = <&pinctrl_usdhc1_200mhz>;
			bus-width = <4>;
			status = "okay";

			#address-cells = <1>;
			#size-cells = <0>;
			mwifiex: wifi@1 {
				compatible = "marvell,sd8997";
				reg = <1>;
				/* MX8MP_IOMUXC_SD1_DATA6__GPIO2_IO08 */
				interrupt-parent = <&gpio2>;
				interrupts = <8 8>; /* IRQ_TYPE_LEVEL_LOW = 8 */

				marvell,caldata_00_txpwrlimit_2g_cfg_set = /bits/ 8 <0x01 0x00 0x06 0x00 0x08 0x02 0x89 0x01>;
				marvell,wakeup-pin = <14>;
			};
		};
	};

	fragment@3 {
		target-path = "/iomuxc";
		__overlay__ {
			pinctrl_usdhc1: usdhc1grp {
				fsl,pins = <
					/* MX8MP_IOMUXC_SD1_CLK__USDHC1_CLK */
					0x08C 0x2EC 0x000 0x0 0x0	0x190
					/* MX8MP_IOMUXC_SD1_CMD__USDHC1_CMD	*/
					0x090 0x2F0 0x000 0x0 0x0	0x1d0
					/* MX8MP_IOMUXC_SD1_DATA0__USDHC1_DATA0 */
					0x094 0x2F4 0x000 0x0 0x0	0x1d0
					/* MX8MP_IOMUXC_SD1_DATA1__USDHC1_DATA1 */
					0x098 0x2F8 0x000 0x0 0x0	0x1d0
					/* MX8MP_IOMUXC_SD1_DATA2__USDHC1_DATA2 */
					0x09C 0x2FC 0x000 0x0 0x0	0x1d0
					/* MX8MP_IOMUXC_SD1_DATA3__USDHC1_DATA3 */
					0x0A0 0x300 0x000 0x0 0x0	0x1d0
				>;
			};

			pinctrl_usdhc1_100mhz: usdhc1grp-100mhz {
				fsl,pins = <
					0x08C 0x2EC 0x000 0x0 0x0	0x194
					0x090 0x2F0 0x000 0x0 0x0	0x1d4
					0x094 0x2F4 0x000 0x0 0x0	0x1d4
					0x098 0x2F8 0x000 0x0 0x0	0x1d4
					0x09C 0x2FC 0x000 0x0 0x0	0x1d4
					0x0A0 0x300 0x000 0x0 0x0	0x1d4
				>;
			};

			pinctrl_usdhc1_200mhz: usdhc1grp-200mhz {
				fsl,pins = <
					0x08C 0x2EC 0x000 0x0 0x0	0x196
					0x090 0x2F0 0x000 0x0 0x0	0x1d6
					0x094 0x2F4 0x000 0x0 0x0	0x1d6
					0x098 0x2F8 0x000 0x0 0x0	0x1d6
					0x09C 0x2FC 0x000 0x0 0x0	0x1d6
					0x0A0 0x300 0x000 0x0 0x0	0x1d6
				>;
			};
		};
	};
};

