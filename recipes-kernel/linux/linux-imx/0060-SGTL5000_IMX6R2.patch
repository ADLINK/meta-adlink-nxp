From dd8144b95d029d850d0e2904e3f52b206cfe228b Mon Sep 17 00:00:00 2001
From: Antony <antonyabee.prakashxv@adlinktech.com>
Date: Wed, 4 Sep 2019 12:28:40 +0530
Subject: [PATCH] SGTL5000_IMX6R2

---
 arch/arm/boot/dts/lec-imx6.dtsi | 31 ++++++++++++++-----------------
 1 file changed, 14 insertions(+), 17 deletions(-)

diff --git a/arch/arm/boot/dts/lec-imx6.dtsi b/arch/arm/boot/dts/lec-imx6.dtsi
index aa790a7..3b44cb7 100644
--- a/arch/arm/boot/dts/lec-imx6.dtsi
+++ b/arch/arm/boot/dts/lec-imx6.dtsi
@@ -14,7 +14,7 @@
 
 /* On-module multiplexer: 0 enables SMARC SPI0, !=0 enables I2S0 instead:
  * 1=TI TLV320AIC23 on LEC-Base R1 carrier, 2=Freescale SGTL5000 on LEC-Base R2 */
-#define CONFIG_I2S_AUDIO	1
+#define CONFIG_I2S_AUDIO	2
 
 /* The LEC-Base carrier doesn't include cameras, but allows connecting some. */
 #define CONFIG_SER_CAMERA	3c /* I2C addr of serial camera, hex without "0x" */
@@ -354,7 +354,6 @@
 &audmux {	/* SMARC I2S0 (instead of SPI0) */
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_audmux>;
-	pinctrl-assert-gpios = <&gpio1 3 GPIO_ACTIVE_HIGH>; /* AEN# */
 	status = "okay";
 };
 #endif
@@ -374,7 +373,6 @@
 	           <&gpio3 24 GPIO_ACTIVE_LOW>; /* SMARC CS1 */
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_ecspi1>;
-	pinctrl-assert-gpios = <&gpio1 3 GPIO_ACTIVE_LOW>; /* AEN# */
 	status = "okay";
 
 	tsc2046@0 {		/* Touch screen controller on LEC-Base R1 carrier */
@@ -527,19 +525,6 @@
 		reg = <0x58>;
 	};
 
-#if CONFIG_I2S_AUDIO == 2
-	codec: sgtl5000@0a {		/* Audio codec on LEC-Base R2 carrier */
-		compatible = "fsl,sgtl5000";
-		reg = <0x0a>;
-		clocks = <&clks IMX6QDL_CLK_CKO>; /* SMARC AUDIO_MCK, actually unused on carrier */
-		VDDA-supply = <&reg_base_3v3>;
-		VDDIO-supply = <&reg_base_1v8>;
-		VDDD-supply = <&reg_base_1v8>;
-		micbias-resistor-k-ohms = <4>;
-		micbias-voltage-m-volts = <1250>;
-	};
-#endif
-
 	carrier_misc_control: pcf8575@20 {	/* GPIO expander on LEC-Base R1 carrier */
 		compatible = "nxp,pcf8575";
 		reg = <0x20>;
@@ -706,6 +691,19 @@
 		};
 	};
 
+#if CONFIG_I2S_AUDIO == 2
+	codec: sgtl5000@2a {		/* Audio codec on LEC-Base R2 carrier */
+		compatible = "fsl,sgtl5000";
+		reg = <0x2a>;
+		clocks = <&clks IMX6QDL_CLK_CKO>; /* SMARC AUDIO_MCK, actually unused on carrier */
+		VDDA-supply = <&reg_base_3v3>;
+		VDDIO-supply = <&reg_base_1v8>;
+		VDDD-supply = <&reg_base_1v8>;
+		micbias-resistor-k-ohms = <4>;
+		micbias-voltage-m-volts = <1250>;
+	};
+#endif
+
 #if CONFIG_I2S_AUDIO == 1
 	codec: tlv320aic23@1a {		/* Audio codec on LEC-Base R1 carrier */
 		compatible = "ti,tlv320aic23";
@@ -787,7 +785,6 @@
 				/* Native pad functions */
 				MX6QDL_PAD_GPIO_0__CCM_CLKO1		0x130b0
 				/* Pads used for GPIOs */
-				MX6QDL_PAD_GPIO_3__GPIO1_IO03        0x80000000 /* AEN# (mux: 0=SPI0, 1=I2S0) */
 				MX6QDL_PAD_ENET_TXD1__GPIO1_IO29     0x80000000 /* GPIO_INT_B */
 				MX6QDL_PAD_NANDF_CS0__GPIO6_IO11     0x80000000 /* SMARC GPIO0/CAM0_PWR# */
 				MX6QDL_PAD_NANDF_CS1__GPIO6_IO14     0x80000000 /* SMARC GPIO1/CAM1_PWR# */
-- 
2.7.4

