From 85fb85e0b72245e0d84580d9fabb0695b6b86bbd Mon Sep 17 00:00:00 2001
From: Antony <antonyabee.prakashxv@adlinktech.com>
Date: Mon, 15 Jul 2019 18:48:21 +0530
Subject: [PATCH 2/2] Add-imx8m-1gb-2gb-module-support

---
 arch/arm64/boot/dts/adlink/Makefile                | 27 +++++++++++++-----
 .../adlink-lec-imx8m-1gb-ddr3l-dual-display.dts    | 33 ++++++++++++++++++++++
 .../adlink-lec-imx8m-1gb-ddr3l-lcdif-g104x1l03.dts | 33 ++++++++++++++++++++++
 .../adlink-lec-imx8m-1gb-ddr3l-lcdif-g185xw01.dts  | 33 ++++++++++++++++++++++
 .../adlink-lec-imx8m-1gb-ddr3l-lcdif-n101bge.dts   | 33 ++++++++++++++++++++++
 .../adlink-lec-imx8m-1gb-ddr3l-usb-otg-master.dts  | 20 +++++++++++++
 .../boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l.dts | 33 ++++++++++++++++++++++
 .../adlink-lec-imx8m-2gb-ddr3l-dual-display.dts    | 18 ++++++++++++
 .../adlink-lec-imx8m-2gb-ddr3l-lcdif-g104x1l03.dts | 18 ++++++++++++
 .../adlink-lec-imx8m-2gb-ddr3l-lcdif-g185xw01.dts  | 18 ++++++++++++
 .../adlink-lec-imx8m-2gb-ddr3l-lcdif-n101bge.dts   | 18 ++++++++++++
 .../adlink-lec-imx8m-2gb-ddr3l-usb-otg-master.dts  | 18 ++++++++++++
 .../boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l.dts | 18 ++++++++++++
 13 files changed, 313 insertions(+), 7 deletions(-)
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-dual-display.dts
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-g104x1l03.dts
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-g185xw01.dts
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-n101bge.dts
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-usb-otg-master.dts
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l.dts
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-dual-display.dts
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-g104x1l03.dts
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-g185xw01.dts
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-n101bge.dts
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-usb-otg-master.dts
 create mode 100644 arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l.dts

diff --git a/arch/arm64/boot/dts/adlink/Makefile b/arch/arm64/boot/dts/adlink/Makefile
index 8e1c2fd..5c73dfb 100644
--- a/arch/arm64/boot/dts/adlink/Makefile
+++ b/arch/arm64/boot/dts/adlink/Makefile
@@ -1,15 +1,28 @@
 dtb-$(CONFIG_ARCH_LEC_IMX8M) += adlink-lec-imx8m.dtb \
-                                adlink-2gb-canfd.dtb \
-                                adlink-2gb-canfd-40M.dtb \
-                                adlink-4gb-canfd.dtb \
-                                adlink-4gb-canfd-40M.dtb \
-				adlink-lec-imx8m-usb-otg-master.dtb \
+				adlink-imx8mq-evk-dual-display.dtb \
 				adlink-imx8mq-evk-lcdif-g104x1l03.dtb \
 				adlink-imx8mq-evk-lcdif-g185xw01.dtb \
 				adlink-imx8mq-evk-lcdif-hv150ux2.dtb \
-				adlink-imx8mq-evk-lcdif-lm215wf3.dtb \
 				adlink-imx8mq-evk-lcdif-n101bge.dtb \
-				adlink-imx8mq-evk-dual-display.dtb
+				adlink-imx8mq-evk-lcdif-lm215wf3.dtb \
+				adlink-2gb-canfd.dtb \
+				adlink-2gb-canfd-40M.dtb \
+				adlink-4gb-canfd.dtb \
+				adlink-4gb-canfd-40M.dtb \
+				adlink-lec-imx8m-usb-otg-master.dtb \
+				adlink-lec-imx8m-2gb-ddr3l.dtb \
+				adlink-lec-imx8m-2gb-ddr3l-dual-display.dtb \
+				adlink-lec-imx8m-2gb-ddr3l-lcdif-g104x1l03.dtb \
+				adlink-lec-imx8m-2gb-ddr3l-lcdif-g185xw01.dtb \
+				adlink-lec-imx8m-2gb-ddr3l-lcdif-n101bge.dtb \
+				adlink-lec-imx8m-2gb-ddr3l-usb-otg-master.dtb \
+				adlink-lec-imx8m-1gb-ddr3l.dtb \
+				adlink-lec-imx8m-1gb-ddr3l-dual-display.dtb \
+				adlink-lec-imx8m-1gb-ddr3l-lcdif-g104x1l03.dtb \
+				adlink-lec-imx8m-1gb-ddr3l-lcdif-g185xw01.dtb \
+				adlink-lec-imx8m-1gb-ddr3l-lcdif-n101bge.dtb \
+				adlink-lec-imx8m-1gb-ddr3l-usb-otg-master.dtb
+
 always		:= $(dtb-y)
 subdir-y	:= $(dts-dirs)
 clean-files	:= *.dtb
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-dual-display.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-dual-display.dts
new file mode 100644
index 0000000..650e8af
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-dual-display.dts
@@ -0,0 +1,33 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-imx8mq-evk-dual-display.dts"
+
+/ {
+	cpus {
+		/delete-node/ cpu@2;
+		/delete-node/ cpu@3;
+	};
+
+	pmu {
+                interrupt-affinity = <&A53_0>, <&A53_1>;
+        };
+
+	resmem: reserved-memory {
+		/* change cma size to 384MB for 1GB DDR3L SKU */
+		linux,cma {
+			size = <0 0x18000000>;
+		};
+	};
+};
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-g104x1l03.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-g104x1l03.dts
new file mode 100644
index 0000000..1168e22
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-g104x1l03.dts
@@ -0,0 +1,33 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-imx8mq-evk-lcdif-g104x1l03.dts"
+
+/ {
+	cpus {
+		/delete-node/ cpu@2;
+		/delete-node/ cpu@3;
+	};
+
+	pmu {
+                interrupt-affinity = <&A53_0>, <&A53_1>;
+        };
+
+	resmem: reserved-memory {
+		/* change cma size to 384MB for 1GB DDR3L SKU */
+		linux,cma {
+			size = <0 0x18000000>;
+		};
+	};
+};
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-g185xw01.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-g185xw01.dts
new file mode 100644
index 0000000..68b24ee
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-g185xw01.dts
@@ -0,0 +1,33 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-imx8mq-evk-lcdif-g185xw01.dts"
+
+/ {
+	cpus {
+		/delete-node/ cpu@2;
+		/delete-node/ cpu@3;
+	};
+
+	pmu {
+                interrupt-affinity = <&A53_0>, <&A53_1>;
+        };
+
+	resmem: reserved-memory {
+		/* change cma size to 384MB for 1GB DDR3L SKU */
+		linux,cma {
+			size = <0 0x18000000>;
+		};
+	};
+};
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-n101bge.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-n101bge.dts
new file mode 100644
index 0000000..7981de4
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-lcdif-n101bge.dts
@@ -0,0 +1,33 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-imx8mq-evk-lcdif-n101bge.dts"
+
+/ {
+	cpus {
+		/delete-node/ cpu@2;
+		/delete-node/ cpu@3;
+	};
+
+	pmu {
+                interrupt-affinity = <&A53_0>, <&A53_1>;
+        };
+
+	resmem: reserved-memory {
+		/* change cma size to 384MB for 1GB DDR3L SKU */
+		linux,cma {
+			size = <0 0x18000000>;
+		};
+	};
+};
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-usb-otg-master.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-usb-otg-master.dts
new file mode 100644
index 0000000..47380ae
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l-usb-otg-master.dts
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-lec-imx8m-1gb-ddr3l.dts"
+
+&usb_dwc3_0 {
+	status = "okay";
+	dr_mode = "host";
+};
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l.dts
new file mode 100644
index 0000000..0c999e3
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-1gb-ddr3l.dts
@@ -0,0 +1,33 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-lec-imx8m.dts"
+
+/ {
+	cpus {
+		/delete-node/ cpu@2;
+		/delete-node/ cpu@3;
+	};
+
+	pmu {
+                interrupt-affinity = <&A53_0>, <&A53_1>;
+        };
+
+	resmem: reserved-memory {
+		/* change cma size to 384MB for 1GB DDR3L SKU */
+		linux,cma {
+			size = <0 0x18000000>;
+		};
+	};
+};
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-dual-display.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-dual-display.dts
new file mode 100644
index 0000000..c5eb2b7
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-dual-display.dts
@@ -0,0 +1,18 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-imx8mq-evk-dual-display.dts"
+
+/delete-node/ &vpu_pd;
+/delete-node/ &vpu;
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-g104x1l03.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-g104x1l03.dts
new file mode 100644
index 0000000..eb8f982
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-g104x1l03.dts
@@ -0,0 +1,18 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-imx8mq-evk-lcdif-g104x1l03.dts"
+
+/delete-node/ &vpu_pd;
+/delete-node/ &vpu;
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-g185xw01.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-g185xw01.dts
new file mode 100644
index 0000000..d51490d
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-g185xw01.dts
@@ -0,0 +1,18 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-imx8mq-evk-lcdif-g185xw01.dts"
+
+/delete-node/ &vpu_pd;
+/delete-node/ &vpu;
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-n101bge.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-n101bge.dts
new file mode 100644
index 0000000..6fdd445
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-lcdif-n101bge.dts
@@ -0,0 +1,18 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-imx8mq-evk-lcdif-n101bge.dts"
+
+/delete-node/ &vpu_pd;
+/delete-node/ &vpu;
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-usb-otg-master.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-usb-otg-master.dts
new file mode 100644
index 0000000..d999dbb
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l-usb-otg-master.dts
@@ -0,0 +1,18 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-lec-imx8m-usb-otg-master.dts"
+
+/delete-node/ &vpu_pd;
+/delete-node/ &vpu;
diff --git a/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l.dts b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l.dts
new file mode 100644
index 0000000..5dd04ee
--- /dev/null
+++ b/arch/arm64/boot/dts/adlink/adlink-lec-imx8m-2gb-ddr3l.dts
@@ -0,0 +1,18 @@
+/*
+ * Copyright 2017 NXP
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * as published by the Free Software Foundation; either version 2
+ * of the License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "adlink-lec-imx8m.dts"
+
+/delete-node/ &vpu_pd;
+/delete-node/ &vpu;
-- 
2.7.4

